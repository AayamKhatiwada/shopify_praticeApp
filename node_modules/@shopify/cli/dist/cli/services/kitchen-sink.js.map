{"version":3,"file":"kitchen-sink.js","sourceRoot":"","sources":["../../../src/cli/services/kitchen-sink.ts"],"names":[],"mappings":"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","sourcesContent":["import {error} from '@shopify/cli-kit'\nimport {\n  renderConcurrent,\n  renderError,\n  renderFatalError,\n  renderInfo,\n  renderSuccess,\n  renderWarning,\n} from '@shopify/cli-kit/node/ui'\nimport {Signal} from '@shopify/cli-kit/src/abort'\nimport {Writable} from 'node:stream'\n\nexport async function kitchenSink() {\n  renderInfo({\n    headline: 'CLI update available',\n    body: ['Run', {command: 'npm run shopify upgrade'}, '.'],\n  })\n\n  renderInfo({\n    headline: 'App initialized and ready to build.',\n    nextSteps: [\n      [\n        'Run',\n        {\n          command: 'cd verification-app',\n        },\n      ],\n      [\n        'To preview your project, run',\n        {\n          command: 'npm app dev',\n        },\n      ],\n      [\n        'To add extensions, run',\n        {\n          command: 'npm generate extension',\n        },\n      ],\n    ],\n    reference: [\n      [\n        'Run',\n        {\n          command: 'npm shopify help',\n        },\n      ],\n      {\n        link: {\n          label: 'Dev docs',\n          url: 'https://shopify.dev',\n        },\n      },\n    ],\n  })\n\n  renderSuccess({\n    headline: 'CLI updated.',\n    body: 'You are now running version 3.47.',\n  })\n\n  renderSuccess({\n    headline: 'Deployment successful.',\n    body: 'Your extensions have been uploaded to your Shopify Partners Dashboard.',\n    nextSteps: [\n      {\n        link: {\n          label: 'See your deployment and set it live',\n          url: 'https://partners.shopify.com/1797046/apps/4523695/deployments',\n        },\n      },\n    ],\n  })\n\n  renderWarning({\n    headline: 'You have reached your limit of checkout extensions for this app.',\n    body: 'You can free up space for a new one by deleting an existing one.',\n  })\n\n  renderWarning({\n    headline: 'Required access scope update.',\n    body: 'The deadline for re-selecting your app scopes is May 1, 2022.',\n    reference: [\n      {\n        link: {\n          label: 'Dev docs',\n          url: 'https://shopify.dev/app/scopes',\n        },\n      },\n    ],\n  })\n\n  renderError({\n    headline: \"Couldn't connect to the Shopify Partner Dashboard.\",\n    tryMessage: 'Check your internet connection and try again.',\n  })\n\n  const somethingWentWrong = new error.Bug('Something went wrong.')\n\n  somethingWentWrong.stack = `\n  Error: Unexpected error\n      at Module._compile (internal/modules/cjs/loader.js:1137:30)\n      at Object.Module._extensions..js (internal/modules/cjs/loader.js:1157:10)\n      at Module.load (internal/modules/cjs/loader.js:985:32)\n      at Function.Module._load (internal/modules/cjs/loader.js:878:14)\n`\n\n  renderFatalError(somethingWentWrong)\n\n  // renderConcurrent at the end\n  let backendPromiseResolve: () => void\n\n  const backendPromise = new Promise<void>(function (resolve, _reject) {\n    backendPromiseResolve = resolve\n  })\n\n  const backendProcess = {\n    prefix: 'backend',\n    action: async (stdout: Writable, _stderr: Writable, _signal: Signal) => {\n      stdout.write('first backend message')\n      await new Promise((resolve) => setTimeout(resolve, 1000))\n      stdout.write('second backend message')\n      await new Promise((resolve) => setTimeout(resolve, 1000))\n      stdout.write('third backend message')\n      await new Promise((resolve) => setTimeout(resolve, 1000))\n\n      backendPromiseResolve()\n    },\n  }\n\n  const frontendProcess = {\n    prefix: 'frontend',\n    action: async (stdout: Writable, _stderr: Writable, _signal: Signal) => {\n      await backendPromise\n\n      stdout.write('first frontend message')\n      await new Promise((resolve) => setTimeout(resolve, 1000))\n      stdout.write('second frontend message')\n      await new Promise((resolve) => setTimeout(resolve, 1000))\n      stdout.write('third frontend message')\n    },\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-floating-promises\n  renderConcurrent({processes: [backendProcess, frontendProcess]})\n}\n"]}