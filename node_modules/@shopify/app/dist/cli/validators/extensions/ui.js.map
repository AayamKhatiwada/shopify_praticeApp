{"version":3,"file":"ui.js","sourceRoot":"","sources":["../../../../src/cli/validators/extensions/ui.ts"],"names":[],"mappings":"AACA,OAAO,EAAC,KAAK,EAAC,MAAM,kBAAkB,CAAA;AAEtC,MAAM,mBAAmB,GAAG,CAAC,QAAgB,EAAE,EAAE;IAC/C,OAAO,IAAI,KAAK,CAAC,KAAK,CACpB,6DAA6D,QAAQ,GAAG,EACxE,oEAAoE,QAAQ,GAAG,CAChF,CAAA;AACH,CAAC,CAAA;AAED,MAAM,uBAAuB,GAAG,CAAC,kBAA0B,EAAE,mBAA4B,EAAE,EAAE;IAC3F,OAAO,IAAI,KAAK,CAAC,KAAK,CACpB,iBAAiB,kBAAkB,0CAA0C,EAC7E,mBAAmB,CAAC,CAAC,CAAC,4BAA4B,mBAAmB,IAAI,CAAC,CAAC,CAAC,EAAE,CAC/E,CAAA;AACH,CAAC,CAAA;AAED,MAAM,UAAU,oBAAoB,CAAC,UAAyB;IAC5D,KAAK,MAAM,SAAS,IAAI,UAAU,EAAE;QAClC,QAAQ,SAAS,CAAC,IAAI,EAAE;YACtB,KAAK,qBAAqB;gBACxB,sBAAsB,CAAC,SAAS,CAAC,CAAA;gBACjC,MAAK;YACP;gBACE,MAAK;SACR;KACF;AACH,CAAC;AAED,MAAM,UAAU,sBAAsB,CAAC,SAAsB;IAC3D,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,cAAc,EAAE;QAC3C,MAAM,mBAAmB,CAAC,iBAAiB,CAAC,CAAA;KAC7C;IACD,IAAI,SAAS,CAAC,aAAa,CAAC,aAAa,EAAE;QACzC,MAAM,uBAAuB,CAAC,eAAe,EAAE,UAAU,CAAC,CAAA;KAC3D;IACD,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,QAAQ,EAAE;QACrC,MAAM,mBAAmB,CAAC,UAAU,CAAC,CAAA;KACtC;AACH,CAAC","sourcesContent":["import {UIExtension} from '../../models/app/extensions.js'\nimport {error} from '@shopify/cli-kit'\n\nconst WebPixelConfigError = (property: string) => {\n  return new error.Abort(\n    `The Web Pixel Extension configuration is missing the key \"${property}\"`,\n    `Please update your shopify.ui.extension.toml to include a valid \"${property}\"`,\n  )\n}\n\nconst DeprecatedPropertyError = (deprecatedProperty: string, replacementProperty?: string) => {\n  return new error.Abort(\n    `The property \"${deprecatedProperty}\" is deprecated and no longer supported.`,\n    replacementProperty ? `It has been replaced by \"${replacementProperty}\".` : '',\n  )\n}\n\nexport function validateUIExtensions(extensions: UIExtension[]) {\n  for (const extension of extensions) {\n    switch (extension.type) {\n      case 'web_pixel_extension':\n        validateWebPixelConfig(extension)\n        break\n      default:\n        break\n    }\n  }\n}\n\nexport function validateWebPixelConfig(extension: UIExtension) {\n  if (!extension.configuration.runtimeContext) {\n    throw WebPixelConfigError('runtime_context')\n  }\n  if (extension.configuration.configuration) {\n    throw DeprecatedPropertyError('configuration', 'settings')\n  }\n  if (!extension.configuration.settings) {\n    throw WebPixelConfigError('settings')\n  }\n}\n"]}