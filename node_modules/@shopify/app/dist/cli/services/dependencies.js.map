{"version":3,"file":"dependencies.js","sourceRoot":"","sources":["../../../src/cli/services/dependencies.ts"],"names":[],"mappings":"AACA,OAAO,EAAC,EAAE,EAAE,WAAW,EAAC,MAAM,kBAAkB,CAAA;AAChD,OAAO,EAAC,iCAAiC,EAAC,MAAM,4CAA4C,CAAA;AAE5F;;;;;;GAMG;AACH,MAAM,CAAC,KAAK,UAAU,sBAAsB,CAAC,GAAiB;IAC5D,MAAM,IAAI,GAAG,EAAE,CAAC,QAAQ,CACtB;QACE;YACE,KAAK,EAAE,uCAAuC;YAC9C,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,EAAE;gBACtB,MAAM,iCAAiC,CAAC;oBACtC,cAAc,EAAE,GAAG,CAAC,cAAc;oBAClC,SAAS,EAAE,GAAG,CAAC,SAAS;oBACxB,IAAI,EAAE,CAAC;iBACR,CAAC,CAAA;gBACF,IAAI,CAAC,KAAK,GAAG,wBAAwB,CAAA;YACvC,CAAC;SACF;KACF,EACD,EAAC,cAAc,EAAE,WAAW,CAAC,KAAK,CAAC,UAAU,EAAE,EAAC,CACjD,CAAA;IACD,MAAM,IAAI,CAAC,GAAG,EAAE,CAAA;IAChB,MAAM,GAAG,CAAC,kBAAkB,EAAE,CAAA;IAC9B,OAAO,GAAG,CAAA;AACZ,CAAC","sourcesContent":["import {AppInterface} from '../models/app/app.js'\nimport {ui, environment} from '@shopify/cli-kit'\nimport {installNPMDependenciesRecursively} from '@shopify/cli-kit/node/node-package-manager'\n\n/**\n * Given an app, it installs its NPM dependencies by traversing\n * the sub-directories and finding the ones that have NPM dependencies\n * defined in package.json files.\n * @param app - App whose dependencies will be installed.\n * @returns An copy of the app with the Node dependencies updated.\n */\nexport async function installAppDependencies(app: AppInterface) {\n  const list = ui.newListr(\n    [\n      {\n        title: 'Installing any necessary dependencies',\n        task: async (_, task) => {\n          await installNPMDependenciesRecursively({\n            packageManager: app.packageManager,\n            directory: app.directory,\n            deep: 3,\n          })\n          task.title = 'Dependencies installed'\n        },\n      },\n    ],\n    {rendererSilent: environment.local.isUnitTest()},\n  )\n  await list.run()\n  await app.updateDependencies()\n  return app\n}\n"]}