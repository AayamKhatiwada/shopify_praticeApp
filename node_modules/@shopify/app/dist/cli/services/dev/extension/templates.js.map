{"version":3,"file":"templates.js","sourceRoot":"","sources":["../../../../../src/cli/services/dev/extension/templates.ts"],"names":[],"mappings":"AACA,OAAO,EAAC,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAC,MAAM,kBAAkB,CAAA;AAW5D,MAAM,OAAO,qBAAsB,SAAQ,KAAK,CAAC,GAAG;IAClD,YAAY,OAAuB;QACjC,KAAK,CAAC,0BAA0B,OAAO,CAAC,QAAQ,0BAA0B,OAAO,CAAC,gBAAgB,EAAE,CAAC,CAAA;IACvG,CAAC;CACF;AAED,MAAM,CAAC,KAAK,UAAU,OAAO,CAAC,OAAuB;IACnD,MAAM,YAAY,GAAG,MAAM,eAAe,CAAC,OAAO,CAAC,CAAA;IACnD,MAAM,eAAe,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAA;IACrD,OAAO,QAAQ,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAA;AACvD,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,eAAe,CAAC,OAAuB;IAC3D,MAAM,kBAAkB,GAAG,MAAM,qBAAqB,EAAE,CAAA;IACxD,MAAM,YAAY,GAAG,EAAE,CAAA;IACvB,IAAI,OAAO,CAAC,gBAAgB,EAAE;QAC5B,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE,GAAG,OAAO,CAAC,gBAAgB,IAAI,OAAO,CAAC,QAAQ,cAAc,CAAC,CAAC,CAAA;KAChH;IACD,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE,GAAG,OAAO,CAAC,QAAQ,cAAc,CAAC,CAAC,CAAA;IACnF,MAAM,WAAW,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAA;IACjD,IAAI,WAAW,CAAC,MAAM,KAAK,CAAC,EAAE;QAC5B,MAAM,IAAI,qBAAqB,CAAC,OAAO,CAAC,CAAA;KACzC;IACD,OAAO,WAAW,CAAC,CAAC,CAAW,CAAA;AACjC,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,qBAAqB;IACzC,MAAM,SAAS,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,8BAA8B,EAAE;QAClE,IAAI,EAAE,WAAW;QACjB,GAAG,EAAE,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC;KAC3C,CAAC,CAAA;IACF,OAAO,SAAmB,CAAA;AAC5B,CAAC","sourcesContent":["import {UIExtensionSurface} from '../../../utilities/extensions/configuration.js'\nimport {path, template, file, error} from '@shopify/cli-kit'\n\nexport interface GetHTMLOptions {\n  extensionSurface?: UIExtensionSurface\n  template: Template\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  data: any\n}\n\nexport type Template = 'index' | 'tunnel-error' | 'error'\n\nexport class TemplateNotFoundError extends error.Bug {\n  constructor(options: GetHTMLOptions) {\n    super(`Couldn't find template ${options.template} for extension surface ${options.extensionSurface}`)\n  }\n}\n\nexport async function getHTML(options: GetHTMLOptions): Promise<string> {\n  const templatePath = await getTemplatePath(options)\n  const templateContent = await file.read(templatePath)\n  return template.create(templateContent)(options.data)\n}\n\nexport async function getTemplatePath(options: GetHTMLOptions): Promise<string> {\n  const templatesDirectory = await getTemplatesDirectory()\n  const globPatterns = []\n  if (options.extensionSurface) {\n    globPatterns.push(path.join(templatesDirectory, `${options.extensionSurface}/${options.template}.html.liquid`))\n  }\n  globPatterns.push(path.join(templatesDirectory, `${options.template}.html.liquid`))\n  const globMatches = await path.glob(globPatterns)\n  if (globMatches.length === 0) {\n    throw new TemplateNotFoundError(options)\n  }\n  return globMatches[0] as string\n}\n\nexport async function getTemplatesDirectory(): Promise<string> {\n  const directory = await path.findUp('templates/ui-extensions/html', {\n    type: 'directory',\n    cwd: path.moduleDirectory(import.meta.url),\n  })\n  return directory as string\n}\n"]}