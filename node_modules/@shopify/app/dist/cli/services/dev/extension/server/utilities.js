import { getUIExtensionResourceURL, getUIExtensionSurface } from '../../../../utilities/extensions/configuration.js';
import { http } from '@shopify/cli-kit';
export function getRedirectUrl(extension, options) {
    const surface = getUIExtensionSurface(extension.configuration.type);
    const { url: resourceUrl } = getUIExtensionResourceURL(extension.configuration.type, options);
    if (surface === 'checkout' && resourceUrl) {
        const rawUrl = new URL(`https://${options.storeFqdn}/`);
        rawUrl.pathname = resourceUrl;
        rawUrl.searchParams.append('dev', `${options.url}/extensions`);
        return rawUrl.toString();
    }
    else {
        const rawUrl = new URL(`https://${options.storeFqdn}/`);
        rawUrl.pathname = 'admin/extensions-dev';
        rawUrl.searchParams.append('url', getExtensionUrl(extension, options));
        return rawUrl.toString();
    }
}
export function getExtensionUrl(extension, options) {
    const extensionUrl = new URL(options.url);
    extensionUrl.pathname = `/extensions/${extension.devUUID}`;
    return extensionUrl.toString();
}
export function sendError(response, error) {
    http.sendError(response.event, http.createError(error));
}
//# sourceMappingURL=utilities.js.map